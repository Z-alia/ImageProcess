# ğŸ”§ ç¤ºæ³¢å™¨ä¿®å¤è¯´æ˜

## å·²ä¿®å¤çš„é—®é¢˜

### 1. âœ… ä¸­æ–‡ä¹±ç é—®é¢˜
- åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ äº†UTF-8ç¼–ç è®¾ç½®
- ä½¿ç”¨ `g_setenv("LANG", "zh_CN.UTF-8", TRUE)`

### 2. âœ… æ— æ³•æ·»åŠ å˜é‡é—®é¢˜
- æ·»åŠ äº†CSVè·¯å¾„ä¿å­˜åŠŸèƒ½
- æ”¹è¿›äº†å˜é‡åŠ è½½é€»è¾‘
- æ·»åŠ äº†å‹å¥½çš„æç¤ºä¿¡æ¯

### 3. âœ… ç”¨æˆ·ä½“éªŒæ”¹è¿›
- æ·»åŠ äº†"è¯·å…ˆåŠ è½½CSV"çš„æç¤º
- æ‰“å¼€ç¤ºæ³¢å™¨æ—¶è‡ªåŠ¨åŠ è½½å·²æœ‰çš„CSV
- æ·»åŠ äº†è°ƒè¯•è¾“å‡ºä¿¡æ¯

## ğŸ“ ä½¿ç”¨æ­¥éª¤ï¼ˆé‡è¦ï¼‰

### æ­¥éª¤1ï¼šå…³é—­æ­£åœ¨è¿è¡Œçš„ç¨‹åº
**å¿…é¡»å…ˆå…³é—­imageprocessor.exeï¼Œå¦åˆ™æ— æ³•é‡æ–°ç¼–è¯‘ï¼**

### æ­¥éª¤2ï¼šé‡æ–°ç¼–è¯‘
```batch
.\build.bat
```

### æ­¥éª¤3ï¼šè¿è¡Œç¨‹åº
```batch
.\run.bat
```

### æ­¥éª¤4ï¼šä½¿ç”¨ç¤ºæ³¢å™¨
1. **å…ˆåŠ è½½CSV**ï¼šç‚¹å‡»ä¸»çª—å£çš„"åŠ è½½æ—¥å¿—CSV"æŒ‰é’®
2. **æ‰“å¼€ç¤ºæ³¢å™¨**ï¼šç‚¹å‡»"ğŸ“Š ç¤ºæ³¢å™¨"æŒ‰é’®
3. **æ·»åŠ é€šé“**ï¼šä»ä¸‹æ‹‰æ¡†é€‰æ‹©å˜é‡ï¼Œç‚¹å‡»"æ·»åŠ é€šé“"
4. **æ’­æ”¾è§†é¢‘**ï¼šæ³¢å½¢ä¼šè‡ªåŠ¨æ›´æ–°

## ğŸ¯ æµ‹è¯•CSVç¤ºä¾‹

åˆ›å»ºä¸€ä¸ªæµ‹è¯•CSVæ–‡ä»¶ï¼ˆtest_data.csvï¼‰ï¼š

```csv
host_recv_iso,log_text_hex,log_text_utf8,æ¸©åº¦,é€Ÿåº¦,ç”µå‹
2025-10-24 10:00:00.001,48656C6C6F,Hello,25.5,120,3.3
2025-10-24 10:00:00.034,576F726C64,World,26.1,125,3.2
2025-10-24 10:00:00.067,54657374,Test,25.8,118,3.4
2025-10-24 10:00:00.101,44617461,Data,27.2,130,3.5
2025-10-24 10:00:00.134,496E666F,Info,26.5,122,3.3
```

## ğŸ› å¦‚æœè¿˜æœ‰é—®é¢˜

### ä¸­æ–‡ä»ç„¶ä¹±ç 
å°è¯•è®¾ç½®ç³»ç»Ÿç¼–ç ï¼š
```cpp
// åœ¨ oscilloscope.cpp çš„æ„é€ å‡½æ•°ä¸­å·²æ·»åŠ 
g_setenv("LANG", "zh_CN.UTF-8", TRUE);
```

### ä¸‹æ‹‰æ¡†ä»ç„¶æ˜¯ç©ºçš„
æ£€æŸ¥ï¼š
1. CSVæ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½ï¼Ÿ
2. CSVä¸­æ˜¯å¦æœ‰é™¤äº†æ—¶é—´æˆ³ã€hexã€utf8ä¹‹å¤–çš„åˆ—ï¼Ÿ
3. æ§åˆ¶å°æ˜¯å¦è¾“å‡º"æˆåŠŸåŠ è½½CSV"ä¿¡æ¯ï¼Ÿ

### æ·»åŠ é€šé“æ²¡ååº”
æ£€æŸ¥ï¼š
1. æ˜¯å¦é€‰ä¸­äº†æœ‰æ•ˆçš„å˜é‡ï¼ˆä¸æ˜¯æç¤ºæ–‡æœ¬ï¼‰ï¼Ÿ
2. æ§åˆ¶å°æ˜¯å¦è¾“å‡º"å·²æ·»åŠ é€šé“"ä¿¡æ¯ï¼Ÿ

## ğŸ“Š è°ƒè¯•ä¿¡æ¯

ç¨‹åºä¼šåœ¨æ§åˆ¶å°è¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š
```
[ç¤ºæ³¢å™¨] æˆåŠŸåŠ è½½CSVï¼Œæ‰¾åˆ° 3 ä¸ªå˜é‡
[ç¤ºæ³¢å™¨] å·²æ·»åŠ é€šé“: æ¸©åº¦
[ç¤ºæ³¢å™¨] é€šé“ 'æ¸©åº¦' å·²å­˜åœ¨
```

å¦‚æœçœ‹ä¸åˆ°è¿™äº›ä¿¡æ¯ï¼Œè¯´æ˜å¯èƒ½æœ‰é—®é¢˜ã€‚

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### ä¿®æ”¹çš„æ–‡ä»¶
1. `src/oscilloscope.cpp`
   - æ·»åŠ UTF-8ç¼–ç è®¾ç½®
   - æ”¹è¿›loadCSVå‡½æ•°
   - æ·»åŠ é€šé“éªŒè¯
   - æ·»åŠ æç¤ºä¿¡æ¯

2. `src/main.cpp`
   - æ·»åŠ g_csv_file_pathå…¨å±€å˜é‡
   - æ”¹è¿›open_oscilloscope_clicked
   - ä¿å­˜CSVè·¯å¾„

### å…³é”®ä»£ç ç‰‡æ®µ

#### 1. UTF-8ç¼–ç è®¾ç½®
```cpp
// åœ¨æ„é€ å‡½æ•°ä¸­
g_setenv("LANG", "zh_CN.UTF-8", TRUE);
```

#### 2. CSVè·¯å¾„ä¿å­˜
```cpp
// åŠ è½½CSVæ—¶ä¿å­˜è·¯å¾„
g_csv_file_path = filename;
```

#### 3. è‡ªåŠ¨åŠ è½½åˆ°ç¤ºæ³¢å™¨
```cpp
if (!g_csv_file_path.empty() && g_csv_reader.getRecordCount() > 0) {
    g_oscilloscope->loadCSV(g_csv_file_path);
    g_oscilloscope->updateDisplay(g_frame_index);
}
```

---

**ç¼–è¯‘å‰è¯·ç¡®ä¿å…³é—­æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„imageprocessor.exeå®ä¾‹ï¼**
